
# 萝卜多-多菠萝后端方案设计

## 1. 架构图以及说明

  - 1.1 web层

    分为多个web，每一个web对应的系统以及包含的功能。
    * 前台：
    * 后台：

  - 1.2 service

    含有多个service，单个service负责单个模块及功能，每个模块包含的数据库表，每张表的简单说明，表的大小预估，扩展性设计。

  - 1.3 core

    实体类对应的 model, 工具类（排序、编号转换等）

  - 1.4 cache

    使用redis缓存

  - 1.5 db

    关系型数据库Mysql

## 2. 表格设计

  - 2.1 User表 (后台用户信息表)


  |    字段    |               类型                |   注释   |
  | ---------- | --------------------------------- | -------- |
  |     id     | bigint auto_increment primary key |  用户ID  |
  |    name    |            varchar(50)            |  登录名  |
  |  passwoed  |           varchar(100)            | 登录密码 |
  |    salt    |           varchar(100)            |   盐值   |
  |    role    |           varchar(200)            |   角色   |
  | phone_num  |           varchar(200)            |  手机号  |
  | head_image |            head_image             |   头像   |
  | gmt_create |               long                | 注册时间 |
  | gmt_update |               long                | 更新时间 |
  | create_by  |           varchar(100)            |  创建人  |
  | update_by  |           varchar(100)            |  更新人  |


   - 2.2 company_info (公司信息表)

|        字段         |               类型                |                  注释                  |
| ------------------- | --------------------------------- | -------------------------------------- |
|     company_id      | bigint auto_increment primary key |                 公司ID                 |
|    company_name     |           varchar(200)            |                公司名称                |
|   company_slogan    |            archar(300)            |               公司Slogan               |
| number_of_companies |              bigint               |                公司人数                |
|   financing_scale   |                int                |            融资规模：见约定            |
|        area         |                int                |           地区:见约定(待定)            |
|  company_industry   |                int                |            公司行业:见约定             |
|    company_logo     |           varchar(200)            |                公司logo                |
|  company_ profile   |           varchar(1000)           |                公司简介                |
|     company_tag     |           varchar(100)            |                公司标签                |
|     Is_approve      |                int                |  认证状态: <br>0:未认证 <br>1:已认证   |
|      Is_frozen      |                int                | 公司冻结状态: <br>0:未冻结<br>1:已冻结 |
|     gmt_create      |               long                |                注册时间                |
|     gmt_update      |               long                |                更新时间                |
|      create_by      |           varchar(100)            |                 创建人                 |
|      update_by      |           varchar(100)            |                 更新人                 |


  - 2.3 Company_produce 公司产品

|      字段       |               类型                |    注释    |
| --------------- | --------------------------------- | ---------- |
|       id        | bigint auto_increment primary key |   产品ID   |
|   company_id    |              bigint               |   公司id   |
|  produce_name   |           varchar(100)            |  产品名称  |
| produce_slogan  |           varchar(100)            | 产品slogan |
|  produce_logo   |           varchar(100)            |  产品logo  |
| produce_produce |           varchar(100)            |  产品介绍  |
|   gmt_create    |               long                |  注册时间  |
|   gmt_update    |               long                |  更新时间  |
|    create_by    |           varchar(100)            |   创建人   |
|    update_by    |           varchar(100)            |   更新人   |



  - 2.4  Recruiting_company_information (招聘公司相关信息)

|    字段    |               类型                |     注释     |
| ---------- | --------------------------------- | ------------ |
|     id     | bigint auto_increment primary key |  相关信息id  |
| company_id |              bigint               |    公司id    |
|   phone    |           varchar(100)            |   招聘电话   |
|   email    |           varchar(100)            |   招聘邮件   |
|   adress   |           varchar(200)            | 公司详细地址 |
|    map     |           varchar(100)            |   公司地图   |
| gmt_create |               long                |   注册时间   |
| gmt_update |               long                |   更新时间   |
| create_by  |           varchar(100)            |    创建人    |
| update_by  |           varchar(100)            |    更新人    |

  - 2.5 position_info (职位信息)


|      字段       |               类型                |               注释               |
| --------------- | --------------------------------- | -------------------------------- |
|       id        | bigint auto_increment primary key |              职位id              |
|  is_recommend   |                int                | 是否推荐：<br>0:未推荐<br>已推荐 |
|    position     |           varcahr(100)            |               职位               |
|  company_name   |           varcahr(100)            |             公司名称             |
| work_experience |            varcahr(20)            |             工作经验             |
|    education    |                int                |           学历：见约定           |
|     salary      |                int                |           薪资:见约定            |
|  position_type  |                int                |         职业类型：见约定         |
|  position_tag   |           varcahr(255)            |         职位等级:见约定          |
|   post_duties   |           varcahr(500)            |             岗位职责             |
|     skills      |           varcahr(500)            |             必备技能             |
|     welfare     |           varcahr(200)            |             公司福利             |
|   online_time   |               long                |             上线时间             |
|    is_online    |                int                |         上线状态:见约定          |
|   gmt_create    |               long                |             注册时间             |
|   gmt_update    |               long                |             更新时间             |
|    create_by    |           varchar(100)            |              创建人              |
|    update_by    |           varchar(100)            |              更新人              |


  - 2.6 banner_show (banner图展示)

|    字段     |               类型                |                注释                |
| ----------- | --------------------------------- | ---------------------------------- |
|     id      | bigint auto_increment primary key |                 id                 |
|    type     |                int                |        banner图类型：见约定        |
| tiles_name  |           varcahr(100)            |              标题名称              |
|    photo    |           varcahr(100)            |                图片                |
|  is_online  |                int                | 是否上线：<br>0:未上线<br>1:已上线 |
| online_time |               long                |              上线时间              |
| gmt_create  |               long                |              注册时间              |
| gmt_update  |               long                |              更新时间              |
|  create_by  |           varchar(100)            |               创建人               |
|  update_by  |           varchar(100)            |               更新人               |


  - 2.7  user_roler (用户角色表)

|    字段    |              类型              |   注释   |
| ---------- | ------------------------------ | -------- |
|     id     | int auto_increment primary key |    id    |
|  user_id   |             bigint             |  用户id  |
|  role_id   |             bigint             |  角色id  |
| gmt_create |              long              | 注册时间 |
| gmt_update |              long              | 更新时间 |
| create_by  |          varchar(100)          |  创建人  |
| update_by  |          varchar(100)          |  更新人  |


  - 2.8 role (角色表)

|    字段    |              类型              |   注释   |
| ---------- | ------------------------------ | -------- |
|     id     | int auto_increment primary key |  角色id  |
|    name    |          varchar(200)          | 角色名称 |
| gmt_create |              long              | 注册时间 |
| gmt_update |              long              | 更新时间 |
| create_by  |          varchar(100)          |  创建人  |
| update_by  |          varchar(100)          |  更新人  |

  - 2.9 role_ permission (角色权限关联表)

|    字段    |              类型              |   注释   |
| ---------- | ------------------------------ | -------- |
|     id     | int auto_increment primary key |    id    |
|  role_id   |              int               |  角色ID  |
|  node_id   |              int               |  权限id  |
|   status   |          varchar(200)          |   描述   |
| gmt_create |              long              | 注册时间 |
| gmt_update |              long              | 更新时间 |
| create_by  |          varchar(100)          |  创建人  |
| update_by  |          varchar(100)          |  更新人  |

  - 2.10 permission (权限表)

|    字段    |              类型              |   注释   |
| ---------- | ------------------------------ | -------- |
|     id     | int auto_increment primary key |    id    |
|   method   |          varchar(200)          |   方法   |
|    name    |          varchar(100)          |  权限名  |
| gmt_create |              long              | 注册时间 |
| gmt_update |              long              | 更新时间 |
| create_by  |          varchar(100)          |  创建人  |
| update_by  |          varchar(100)          |  更新人  |

  - 2.11 module_table (权限表)

|       字段       |              类型              |   注释   |
| ---------------- | ------------------------------ | -------- |
|        id        | int auto_increment primary key |    id    |
|       name       |          varchar(100)          |  模块名  |
|      menuld      |          varchar(100)          |  模块ID  |
|       url        |          varchar(200)          | URL地址  |
| parent_module_ID |              int               | 父模块ID |
| module_category  |          varchar(100)          | 模块类别 |
|    gmt_create    |              long              | 注册时间 |
|    gmt_update    |              long              | 更新时间 |
|    create_by     |          varchar(100)          |  创建人  |
|    update_by     |          varchar(100)          |  更新人  |



## 3. 接口文档

### 约定

#### 公司信息表

公司认证状态（ is_approve）：未认证：0  已认证：1

公司是否冻结( is_frozen ) : 未冻结：0 已冻结：1

公司行业 (company_industry) : 移动互联网、电子商务、企业服务、O2O、教育、金融、游戏----------0、1、2、3、4、5、6

公司所在地区 ( area) ： 待定

融资规模 ( financing_scale) :天使轮、A轮、B轮、C轮、D轮及以上、上市、无需融资-------------0、1、2、3、4、5、6


#### 职位表

学历要求（education）分为：高中及以下、大专、本科、硕士、博士----------0、1、2、3、4

薪资（salary）分为：8k以下、8~15k、16~25k、26k及以上---------0、1、2、3

职位类别（postType）分为：产品、UI、QA、Android、IOS、WEB、OP、Java---------------0、1、2、3、4、5、6、7

上下架状态（shelf）：下架状态：0    上架状态：1

职位等级分为初级、中级、高级   ---------0、1、2


#### banner图展示

上下线状态（status）：下线状态：0    上线状态：1

banner图类型(type)分为 ：  首页、找职位、找精英 --------- 1、2、3


#### 前台接口文档

#### 3.1 前台首页

##### 3.1.1 接口名称：获取 Banner图


后端负责：庄为朋  完成状态：

请求地址： GET /home/a/banner/list

请求参数：

| 字段 |    说明    | 类型 | 是否必填 |                       备注                       |
| ---- | ---------- | ---- | -------- | ------------------------------------------------ |
| type | banner类型 | int  |    是    | 1:首页banner<br>2:找职位banner<br>3:找精英banner |


返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  | object |  -   |

data

| 字段  |    说明     |  类型  | 备注 | 是否必填 |
| ----- | ----------- | ------ | ---- | -------- |
|  id   | Banner图id  |  int   |      |          |
| image | Banner图URL | String |      |    -     |

疑问：点击图片是否需要跳转指定地址？

sql语句:


##### 3.2 接口名称：获取最新、推荐职位列表(与 “找职业页面” 的最新职位、推荐职位公用一个接口)

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/Diversityjoblist

请求参数：

|     字段     |   说明   | 类型 | 是否必填 |               备注               |
| ------------ | -------- | ---- | -------- | -------------------------------- |
| is_recommend | 是否推荐 | int  |    是    | 0：未认证不推荐<br> 1:已认证推荐 |
|     page     |   页码   | int  |    是    |                                  |
|     size     |   页长   | int  |    是    |                                  |
|    total     |   总数   | int  |    是    |                -                 |

首页推荐职位：直接返回20条数据

返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  |  List  |  -   |

date：

|     字段     |   说明   |  类型  | 备注 |
| ------------ | -------- | ------ | ---- |
|  companyId   |  公司id  |  long  |      |
| companyName  | 公司名称 | String |      |
| companyLogo  | 公司logo | String |      |
|  positionId  |  职位id  |  long  |      |
| positionName | 职位名称 | String |      |
|    salary    |   薪资   |  int   |  -   |


##### 3.3 接口名称：推荐职位、最新职位

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/joblist

请求参数：

|      字段       |   说明   |  类型  | 是否必填 | 备注 |
| --------------- | -------- | ------ | -------- | ---- |
|   positioName   | 职位名称 | String |    否    |      |
|      area       |   地区   | String |    否    |      |
| companyIndustry | 公司行业 |  int   |    否    |      |
| workExperience  | 工作经验 |  int   |    否    |      |
|     salary      | 薪资水平 |  int   |    否    |      |
|   releaseTime   | 发布时间 |  int   |    否    |      |
|      page       |   页码   |  int   |    是    |      |
|      size       |   页长   |  int   |    是    |      |


首页推荐职位：每页显示8条数据

返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  |  List  |  -   |

date：

|      字段      |   说明   |  类型  |   备注   |
| -------------- | -------- | ------ | -------- |
|   companyId    |  公司id  |  long  |          |
|  companyName   | 公司名称 | String |          |
|  companyLogo   | 公司logo | String |          |
|   positionId   |  职位id  |  long  |          |
|  positionName  | 职位名称 | String |          |
|     salary     |   薪资   |  int   |          |
|      area      |   地区   | String |          |
|   education    |   学历   |  int   |          |
| workExperience | 工作经验 |  int   |          |
|    welfare     | 公司福利 | String |          |
|   gmt_update   | 更新时间 |  long  | 发布时间 |
|      page      |   页码   |  int   |          |
|      size      |   页长   |  int   |          |
|     total      |   总数   |  int   |    -     |




##### 3.4 接口名称：推荐公司

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/recommendedcompany

请求参数：无

1个推荐认证公司,8个普通公司

返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  |  List  |  -   |

date：

|       字段       |   说明   |  类型  | 备注 |
| ---------------- | -------- | ------ | ---- |
|    companyId     |  公司id  |  long  |      |
|   companyName    | 公司名称 | String |      |
|   companyLogo    | 公司logo | String |      |
|       area       |   地区   | String |      |
| company_industry | 公司行业 |  int   |      |



##### 3.5 接口名称：最新发布职位认证公司Banner图

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/latestcertificationcompany

请求参数：无

最新发布职位4个认证公司

返回参数：

|  字段   |  说明  |  类型  |     备注      |
| ------- | ------ | ------ | ------------- |
|  code   | 状态码 | Number |               |
| message |  消息  | String |               |
|  data   |  数据  |  List  | 两个List集合- |

date：

|     字段     |     说明     |      类型      | 备注 |
| ------------ | ------------ | -------------- | ---- |
| companyInfo  | 公司相关信息 | List< object > |      |
| positionInfo | 热招职位信息 | List< object > |      |

companyInfo:

|      字段       |   说明   |  类型  | 备注 |
| --------------- | -------- | ------ | ---- |
|    companyId    |  公司id  |  long  |      |
|   companyName   | 公司名称 | String |      |
|   companyLogo   | 公司logo | String |      |
| financingScale  | 公司规模 |  int   |      |
| companyIndustry | 公司行业 |  int   |      |
|      area       | 公司区域 |  int   |      |

positionInfo

|     字段     |   说明   |  类型  | 备注 |
| ------------ | -------- | ------ | ---- |
|  positionId  |  职位id  |  long  |      |
| positionName | 职位名称 | String |      |


##### 3.6 接口名称：搜索公司

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/companylist

请求参数：

备注 ：查询条件不符合时。显示推荐公司，调用另外一个接口。

|      字段       |   说明   |  类型  | 是否必填 | 备注 |
| --------------- | -------- | ------ | -------- | ---- |
|   companyName   | 公司名称 | String |    否    |      |
|      area       |   地区   | String |    否    |      |
| companyIndustry | 公司行业 |  int   |    否    |      |
| financingScale  | 融资规模 |  int   |    否    |      |
|      page       |   页码   |  int   |    是    |      |
|      size       |   页长   |  int   |    是    |      |

返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  |  List  |  -   |

date：

|       字段        |   说明   |  类型  | 备注 |
| ----------------- | -------- | ------ | ---- |
|     companyId     |  公司id  |  long  |      |
|    companyName    | 公司名称 | String |      |
|    companyLogo    | 公司logo | String |      |
|       area        |   地区   | String |      |
| company_industry  | 公司行业 |  int   |      |
|  financingScale   | 融资规模 |  int   |      |
| numberOfPositions | 在招职位 |  int   |      |
|       page        |   页码   |  int   |      |
|       size        |   页长   |  int   |      |
|       total       |   总数   |  int   |      |


##### 3.7 接口名称：公司详情

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/company/info

请求参数：

|   字段    |  说明  | 类型 | 是否必填 | 备注 |
| --------- | ------ | ---- | -------- | ---- |
| companyId | 公司id | long |    否    |      |


返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  | Object |  -   |

date：

|       字段        |    说明    |  类型  | 备注 |
| ----------------- | ---------- | ------ | ---- |
|     companyId     |   公司id   |  long  |      |
|     isApprove     |  是否认证  |  int   |      |
|    companyName    |  公司名称  | String |      |
|   companySlogan   | 公司Slogan | String |      |
|    companyLogo    |  公司logo  | String |      |
|       area        |    地区    | String |      |
| company_industry  |  公司行业  |  int   |      |
|  financingScale   |  融资规模  |  int   |      |
| numberOfPositions |  在招职位  |  int   |      |
|  companyProduce   |  公司产品  | Object |      |
|       page        |    页码    |  int   |      |
|       size        |    页长    |  int   |      |
|       total       |    总数    |  int   |      |

companyProduce：
|      字段       |  说明  |    类型    | 备注 |
| --------------- | ------ | ---------- | ---- |
|  produce_name   | String |  产品名称  |      |
| produce_slogan  | String | 产品slogan |      |
|  produce_logo   | String |  产品logo  |      |
| produce_produce | String |  产品介绍  |      |



##### 3.8 接口名称：公司在招职位

后端负责：庄为朋 完成状态：

请求地址：GET /home/a/company/positioninfo

请求参数：

|   字段    |  说明  | 类型 | 是否必填 | 备注 |
| --------- | ------ | ---- | -------- | ---- |
| companyId | 公司id | long |    否    |      |


返回参数：

|  字段   |  说明  |  类型  | 备注 |
| ------- | ------ | ------ | ---- |
|  code   | 状态码 | Number |      |
| message |  消息  | String |      |
|  data   |  数据  | Object |  -   |

date：

|       字段        |    说明    |  类型  | 备注 |
| ----------------- | ---------- | ------ | ---- |
|     companyId     |   公司id   |  long  |      |
|     isApprove     |  是否认证  |  int   |      |
|    companyName    |  公司名称  | String |      |
|   companySlogan   | 公司Slogan | String |      |
|    companyLogo    |  公司logo  | String |      |
|       area        |    地区    | String |      |
| company_industry  |  公司行业  |  int   |      |
|  financingScale   |  融资规模  |  int   |      |
|      welfare      |  公司福利  | String |      |
| numberOfPositions |  在招职位  | Object |      |
|       page        |    页码    |  int   |      |
|       size        |    页长    |  int   |      |
|       total       |    总数    |  int   |      |

numberOfPositions：
|      字段       |   说明   |  类型  | 备注 |
| --------------- | -------- | ------ | ---- |
|   position_id   |  职位id  |  long  |      |
|  position_name  | 职位名称 | String |      |
|      area       |   地区   | String |      |
| work_experience | 工作经验 |  int   |      |
|    education    |   学历   |  int   |      |
|     salary      |   薪资   |  int   |      |
|   gmt_update    | 发布时间 |  long  |      |
